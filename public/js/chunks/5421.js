(self.webpackChunkfusioncms=self.webpackChunkfusioncms||[]).push([[5421],{5421:(t,n,a)=>{"use strict";a.r(n),a.d(n,{default:()=>l});var e=a(1513),i=a(6072);const s={auth:function(){return{permission:"links.viewAny"}},components:{VueNestable:e.VueNestable,VueNestableHandle:e.VueNestableHandle},head:{title:function(){return{inner:this.navigation.name||"Loading..."}}},data:function(){return{loaded:!1,navigation:{},links:[],saving:!1,changed:!1,form:new i.Z({name:"",url:"",new_window:0})}},computed:{options:function(){return this.links.map((function(t){return{label:t.name,value:t.id}}))}},methods:{save:function(){var t=this;this.saving=!0,axios.post("/api/navigation/"+this.navigation.id+"/links/reorder",{links:this.links}).then((function(n){t.saving=!1,t.changed=!1,toast("Links successfully saved.","success")}))},changing:function(){this.loaded?this.changed=!0:this.loaded=!0},fetchLinks:function(){var t=this;return axios.get("/api/navigation/"+this.navigation.id).then((function(n){t.links=n.data.data.links}))},destroy:function(t){var n=this;axios.delete("/api/navigation/"+this.navigation.id+"/links/"+t).then((function(t){n.fetchLinks().then((function(){toast("Link successfully deleted.","success")}))}))}},beforeRouteEnter:function(t,n,a){axios.get("/api/navigation/"+t.params.navigation).then((function(t){a((function(n){n.navigation=t.data.data,n.links=t.data.data.links,n.$emit("updateHead")}))}))},beforeRouteUpdate:function(t,n,a){var e=this;axios.get("/api/navigation/"+t.params.navigation).then((function(t){e.navigation=t.data.data,e.links=t.data.data.links,e.$emit("updateHead")})),a()}};const l=(0,a(1900).Z)(s,(function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("div",{staticClass:"link-page"},[a("portal",{attrs:{to:"title"}},[a("page-title",{attrs:{icon:"anchor"}},[t._v(t._s(t.navigation.name))])],1),t._v(" "),a("portal",{attrs:{to:"actions"}},[a("div",{staticClass:"buttons"},["sm"!=t.$mq?a("ui-button",{key:"go-back-btn",attrs:{to:{name:"navigation"},variant:"secondary"}},[t._v("Go Back")]):t._e(),t._v(" "),a("ui-button",{key:"create-btn",attrs:{to:{name:"links.create"},variant:"primary"}},[t._v("Create")]),t._v(" "),t.changed?a("ui-button",{key:"save-btn",attrs:{variant:"primary",disabled:t.saving},on:{click:function(n){return n.preventDefault(),t.save(n)}}},[t._v("Save")]):t._e()],1)]),t._v(" "),0==t.links.length?a("div",{staticClass:"card"},[t._m(0)]):a("div",{staticClass:"mb-4 xl:mb-6"},[a("VueNestable",{attrs:{threshold:32},on:{input:function(n){return t.changing()}},scopedSlots:t._u([{key:"default",fn:function(n){var e=n.item;return[a("div",{staticClass:"flex"},[a("VueNestableHandle",{staticClass:"flex items-center justify-center border-r w-8 text-gray-500 bg-gray-50 rounded-l",attrs:{item:e}},[a("fa-icon",{attrs:{icon:["fas","grip-vertical"]}})],1),t._v(" "),a("div",{staticClass:"flex flex-1 items-center justify-between"},[a("div",{staticClass:"p-3 flex items-center",class:{"font-bold":""==e.url||"#"==e.url}},[a("ui-status",{staticClass:"mr-2",attrs:{value:e.status}}),t._v(" "),a("router-link",{attrs:{to:{name:"links.edit",params:{navigation:t.navigation.id,link:e.id}}}},[t._v(t._s(e.name))])],1),t._v(" "),a("div",{staticClass:"p-2"},[a("ui-actions",{key:"link_"+e.id+"_actions",attrs:{right:"",id:"link_"+e.id+"_actions"}},[a("ui-dropdown-link",{attrs:{to:{name:"links.edit",params:{navigation:t.navigation.id,link:e.id}}},on:{click:function(t){t.preventDefault()}}},[t._v("Edit")]),t._v(" "),a("ui-dropdown-link",{directives:[{name:"modal",rawName:"v-modal:delete-link",value:e,expression:"item",arg:"delete-link"}],attrs:{classes:"link--danger"},on:{click:function(t){t.preventDefault()}}},[t._v("\n                                    Delete\n                                ")])],1)],1)])],1)]}}]),model:{value:t.links,callback:function(n){t.links=n},expression:"links"}})],1),t._v(" "),a("portal",{attrs:{to:"modals"}},[a("ui-modal",{key:"delete_link",attrs:{name:"delete-link",title:"Delete Link"},scopedSlots:t._u([{key:"footer",fn:function(n){return[a("ui-button",{directives:[{name:"modal",rawName:"v-modal:delete-link",arg:"delete-link"}],staticClass:"ml-3",attrs:{variant:"danger"},on:{click:function(a){return t.destroy(n.data.id)}}},[t._v("Delete")]),t._v(" "),a("ui-button",{directives:[{name:"modal",rawName:"v-modal:delete-link",arg:"delete-link"}]},[t._v("Cancel")])]}}])},[a("p",[t._v("Are you sure you want to permenantly delete this link?")])])],1)],1)}),[function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("div",{staticClass:"card__body text-center"},[a("p",[t._v("Add your first link to get started.")])])}],!1,null,null,null).exports}}]);