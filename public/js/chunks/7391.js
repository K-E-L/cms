(self.webpackChunkfusioncms=self.webpackChunkfusioncms||[]).push([[7391],{7391:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r,getNavigation:()=>a});var i=n(6072);function a(e,t){axios.all([axios.get("/api/navigation/"+e)]).then(axios.spread((function(e){e=e.data.data;var n={name:"",url:"",new_window:"0",parent_id:0,order:null,status:1};_.forEach(e.blueprint.sections,(function(e){_.forEach(e.fields,(function(e){n[e.handle]=e.default}))})),t(null,e,n)})))}const o={auth:function(){return{permission:"links.update"}},components:{"shared-form":n(7918).Z},data:function(){return{navigation:{},links:[],form:new i.Z({name:"",url:"",new_window:"0",parent_id:0,order:0,status:!1},!0),loading:!1}},methods:{submit:function(){var e=this;this.loading=!0,this.form.post("/api/navigation/"+this.navigation.id+"/links").then((function(t){toast("Link saved successfully","success"),e.$router.push("/navigation/"+e.navigation.id+"/links")})).catch((function(t){toast(t.message,"failed"),e.loading=!1}))}},beforeRouteEnter:function(e,t,n){a(e.params.navigation,(function(e,t,a){n(e?function(t){t.$router.push("/navigation"),toast(e.toString(),"danger")}:function(e){e.navigation=t,e.form=new i.Z(a,!0),e.links=_.map(t.links,(function(e){return{label:e.name,value:e.id}})),e.links.unshift({label:"None",value:0}),e.$emit("updateHead")})}))}};const r=(0,n(1900).Z)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("portal",{attrs:{to:"title"}},[n("page-title",{attrs:{icon:"anchor"}},[e._v("Create Link")])],1),e._v(" "),n("shared-form",{attrs:{loading:e.loading,form:e.form,submit:e.submit,navigation:e.navigation,links:e.links}})],1)}),[],!1,null,null,null).exports},7918:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});const i={props:{link:{type:Object,default:function(){return{}}},links:{type:Array,required:!0},navigation:{type:Object,required:!0},form:{type:Object,required:!0},submit:{required:!0},loading:{type:Boolean,required:!1}},computed:{sections:function(){var e=[],t=[];return this.navigation.blueprint&&(e=_.filter(this.navigation.blueprint.sections,(function(e){return"body"==e.placement})),t=_.filter(this.navigation.blueprint.sections,(function(e){return"sidebar"==e.placement}))),{body:e,sidebar:t}},fields:function(){var e=[],t=[];return this.navigation.blueprint&&(e=_.filter(this.navigation.blueprint.sections,(function(e){return"body"==e.placement})),e=_.flatMap(e,(function(e){return e.fields})),t=_.filter(this.navigation.blueprint.sections,(function(e){return"sidebar"==e.placement})),t=_.flatMap(t,(function(e){return e.fields}))),{body:e,sidebar:t}}}};const a=(0,n(1900).Z)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("portal",{attrs:{to:"actions"}},[n("div",{staticClass:"buttons"},[e.navigation.id&&"sm"!=e.$mq?n("ui-button",{attrs:{to:{name:"links",params:{navigation:e.navigation.id}},variant:"secondary"}},[e._v("Go Back")]):e._e(),e._v(" "),n("ui-button",{attrs:{type:"submit",variant:"primary",disabled:!e.form.hasChanges||e.loading},on:{click:function(t){return t.preventDefault(),e.submit(t)}}},[e._v("Save")])],1)]),e._v(" "),n("section-card",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],attrs:{title:"Loading..."}}),e._v(" "),n("portal",{attrs:{to:"sidebar-right"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"! loading"}]},[n("sidebar",{attrs:{id:"link-sidebar"}},[n("sidebar-section",{attrs:{id:"link_panel_status",tabindex:"-1"}},[n("ui-toggle",{attrs:{name:"status",label:"Status",help:e.form.status?"Toggle to disable this link.":"Toggle to enable this link.","true-value":1,"false-value":0},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}}),e._v(" "),n("ui-select-group",{attrs:{name:"new_window",label:"Open link where",help:"Determine where the link should open.",options:[{label:"New Window",value:"1"},{label:"Same Window",value:"0"}]},model:{value:e.form.new_window,callback:function(t){e.$set(e.form,"new_window",t)},expression:"form.new_window"}})],1)],1)],1)]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"! loading"}]},[n("ui-card",{attrs:{id:"link_panel",tabindex:"-1"}},[n("ui-card-body",[n("ui-title-group",{attrs:{name:"name",label:"Name",autocomplete:"off",autofocus:"",required:"","has-error":e.form.errors.has("name"),"error-message":e.form.errors.get("name")},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),e._v(" "),n("ui-input-group",{attrs:{name:"url",label:"URL",help:"The URL of the link.",autocomplete:"off","has-error":e.form.errors.has("url"),"error-message":e.form.errors.get("url")},model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}})],1)],1),e._v(" "),e._l(e.sections.body,(function(t){return n("section-card",{key:t.handle,attrs:{id:"collection_panel_"+t.handle,title:t.name,description:t.description,tabindex:"-1"}},[t.fields.length>0?n("div",e._l(t.fields,(function(t){return n(t.type.id+"-fieldtype",{key:t.handle,tag:"component",attrs:{field:t,errors:e.form.errors},model:{value:e.form[t.handle],callback:function(n){e.$set(e.form,t.handle,n)},expression:"form[field.handle]"}})})),1):e._e()])}))],2)],1)}),[],!1,null,null,null).exports}}]);